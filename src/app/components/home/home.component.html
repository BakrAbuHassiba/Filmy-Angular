<div [class.bg-black]="isDark" [class.bg-white]="!isDark" class="min-vh-100">
  <!-- Navbar -->
  <nav
    class="navbar navbar-expand-lg px-4"
    [ngClass]="isDark ? 'navbar-dark bg-dark' : 'navbar-light bg-light'"
  >
    <a class="navbar-brand fw-bold fs-3 text-danger" routerLink="/">Filmy</a>
    <div class="ms-auto">
      <button class="btn btn-outline-secondary me-2" (click)="toggleTheme()">
        {{ isDark ? 'Light Mode' : 'Dark Mode' }}
      </button>
    </div>
  </nav>

  <!-- Search -->
  <div class="container py-4">
    <input
      [formControl]="searchControl"
      type="text"
      class="form-control mb-4 bg-secondary text-light border-0 rounded-3"
      placeholder="Search movies..."
    />

    <!-- Movies Grid -->
    <div class="row g-4">
      <div *ngFor="let m of filteredMovies" class="col-6 col-md-4 col-lg-3">
        <div
          class="card movie-card position-relative h-100 border-0 shadow-sm"
          [ngClass]="isDark ? 'bg-dark text-light' : 'bg-light text-dark'"
          (click)="goToMovie(m)"
        >
          <!-- Watchlist Button -->
          <button
            class="btn btn-sm btn-outline-danger position-absolute top-0 end-0 m-2"
            (click)="addToWatchlist(m, $event)"
            [disabled]="m.inWatchlist"
          >
            <i *ngIf="!m.inWatchlist" class="bi bi-bookmark"></i>
            <i *ngIf="m.inWatchlist" class="bi bi-bookmark-fill"></i>
          </button>

          <img
            [src]="m.image"
            class="card-img-top rounded-top"
            alt="{{ m.title }}"
          />
          <div class="card-body">
            <h5 class="card-title fw-bold">{{ m.title }}</h5>
            <p class="text-danger small mb-1">
              {{ m.genre.join(', ') }} • {{ m.releaseYear }}
            </p>
            <p class="card-text small text-muted">
              {{ m.description | slice: 0:90 }}...
            </p>
            <p class="fw-bold text-warning">⭐ {{ m.rating }}</p>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer
    class="text-center py-3 mt-5"
    [ngClass]="isDark ? 'text-light bg-dark' : 'text-dark bg-light'"
  >
    © 2025 Filmy
  </footer>
</div>
